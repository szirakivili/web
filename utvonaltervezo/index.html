<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ötvonaltervez≈ë</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4A90E2;
            --primary-color-low: #8ec3ff;
            --secondary-color: #6C757D;
            --background-color: #F8F9FA;
            --card-background: #FFFFFF;
            --border-color: #E0E0E0;
            --text-color: #343A40;
            --shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            --border-radius: 16px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background-color: var(--card-background);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
        }

        h1 {
            text-align: center;
            color: var(--text-color);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .card {
            display: none;
            flex-direction: column;
            gap: 20px;
            animation: fadeIn 0.5s ease-in-out;
        }

        .card.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .card-header h3 {
            margin: 0;
            color: var(--primary-color);
            font-size: 1.5rem;
            flex-grow: 1;
        }

        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--border-color);
            color: var(--secondary-color);
            font-weight: 600;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .card.active .step-indicator {
            background-color: var(--primary-color);
            color: white;
        }

        .card.completed .step-indicator {
            background-color: #28A745;
            color: white;
        }

        .step-indicator-icon {
            display: none;
            font-size: 1.2rem;
        }

        .card.completed .step-indicator-number {
            display: none;
        }

        .card.completed .step-indicator-icon {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            box-sizing: border-box;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: border-color 0.2s ease;
            font-size: 1rem;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .button-group button {
            flex-grow: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        .button-group button.secondary {
            background-color: var(--secondary-color);
        }

        .button-group button:hover {
            background-color: #357ABD;
            transform: translateY(-2px);
        }
        
        /* New box-based styling for checkboxes and radio buttons */
        .checkbox-group, .radio-group {
            display: grid;
            gap: 12px;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Responsive grid layout */
        }
        
        .box-option {
            position: relative;
            max-height: 50px;
        }

        .box-option input[type="radio"],
        .box-option input[type="checkbox"] {
            display: none; /* Hide the default input */
        }

        .box-option label {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            background-color: #F0F0F0;
            color: var(--text-color);
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
            height: 100%;
        }

        /* Active/checked state */
        .box-option input[type="radio"]:checked + label,
        .box-option input[type="checkbox"]:checked + label {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }
        
        .box-option label:hover {
            background-color: var(--primary-color-low);
            border-color: var(--primary-color-low);
            color: white;
            opacity: 0.9;
        }
        
        /* Disabled state */
        .box-option input:disabled + label {
            cursor: not-allowed;
            opacity: 0.5;
            background-color: #E0E0E0;
            color: var(--secondary-color);
        }
        
        .submit-button, .nav-buttons button {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 20px;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        .submit-button {
            background-color: #28A745;
            color: white;
            display: none;
        }

        .submit-button.active {
            display: block;
        }

        .submit-button:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }

        .nav-buttons .back-button {
            background-color: var(--secondary-color);
            color: white;
            display: none;
        }

        .nav-buttons .next-button {
            background-color: var(--primary-color);
            color: white;
            flex-grow: 1;
        }

        .autocomplete-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 10;
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .autocomplete-list-item {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }

        .autocomplete-list-item:last-child {
            border-bottom: none;
        }

        .autocomplete-list-item.stop {
            font-weight: bold;
        }

        .autocomplete-list-item:hover {
            background-color: #F0F0F0;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
                border-radius: 8px;
            }
            h1 {
                font-size: 1.8rem;
            }
            .checkbox-group, .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F7NERFLG67"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-F7NERFLG67');
</script>
<body>

    <div class="container">
        <h1>BKK √ötvonaltervez≈ë üó∫Ô∏è</h1>
        <form id="route-form">
            <div class="card active" data-step="1">
                <div class="card-header">
                    <div class="step-indicator">
                        <span class="step-indicator-number">1</span>
                        <span class="step-indicator-icon">‚úîÔ∏è</span>
                    </div>
                    <h3>Melyik nap? üóìÔ∏è</h3>
                </div>
                <div class="form-group button-group">
                    <button type="button" id="today-btn">Ma</button>
                    <button type="button" id="tomorrow-btn">Holnap</button>
                </div>
                <div class="form-group">
                    <label for="date-input">Vagy v√°lassz d√°tumot:</label>
                    <input type="date" id="date-input">
                </div>
            </div>

            <div class="card" data-step="2">
                <div class="card-header">
                    <div class="step-indicator">
                        <span class="step-indicator-number">2</span>
                        <span class="step-indicator-icon">‚úîÔ∏è</span>
                    </div>
                    <h3>Hov√°? üìç</h3>
                </div>
                <div class="form-group">
                    <label for="destination-input">Hely keres√©se:</label>
                    <input type="text" id="destination-input" placeholder="pl. V√°rna utca 3...">
                    <div id="destination-buttons" class="button-group"></div> <!-- JSON hely gombok -->
                    <div id="destination-results" class="autocomplete-list"></div>
                </div>
            </div>

            <div class="card" data-step="3">
                <div class="card-header">
                    <div class="step-indicator">
                        <span class="step-indicator-number">3</span>
                        <span class="step-indicator-icon">‚úîÔ∏è</span>
                    </div>
                    <h3>H√°nyra? üïó</h3>
                </div>
                <div class="form-group">
                    <div class="radio-group">
                        <div class="box-option">
                            <input type="radio" name="timing" value="now" id="timing-now" checked>
                            <label for="timing-now" id="timing-now-label">Most indulok</label>
                        </div>
                        <div class="box-option">
                            <input type="radio" name="timing" value="arrival" id="timing-arrival">
                            <label for="timing-arrival">√ârkez√©si id≈ë be√°ll√≠t√°sa</label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="arrival-time">√ârkez√©si id≈ë:</label>
                    <input type="time" id="arrival-time" disabled>
                    <div id="arrival-buttons" class="button-group"></div> <!-- JSON id≈ëpont gombok -->
                </div>
            </div>

            <div class="card" data-step="4">
                <div class="card-header">
                    <div class="step-indicator">
                        <span class="step-indicator-number">4</span>
                        <span class="step-indicator-icon">‚úîÔ∏è</span>
                    </div>
                    <h3>Honnan? üìç</h3>
                </div>
                <div class="form-group button-group">
                    <button type="button" id="current-location-btn" class="secondary">Aktu√°lis poz√≠ci√≥</button>
                </div>
                <div class="form-group">
                    <label for="origin-input">Hely keres√©se:</label>
                    <input type="text" id="origin-input" placeholder="pl. Kelenf√∂ld p√°lyaudvar...">
                    <div id="origin-buttons" class="button-group"></div> <!-- JSON hely gombok -->
                    <div id="origin-results" class="autocomplete-list"></div>
                </div>
            </div>
            
            <div class="card" data-step="5">
                <div class="card-header">
                    <div class="step-indicator">
                        <span class="step-indicator-number">5</span>
                        <span class="step-indicator-icon">‚úîÔ∏è</span>
                    </div>
                    <h3>Be√°ll√≠t√°sok ‚öôÔ∏è</h3>
                </div>
                <div class="form-group">
                    <label for="walk-speed">S√©ta sebess√©ge:</label>
                    <select id="walk-speed">
                        <option value="MID">Norm√°l</option>
                        <option value="FAST">Gyors</option>
                        <option value="SLOW">Lass√∫</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>T√∂megk√∂zleked√©si eszk√∂z√∂k:</label>
                    <div class="checkbox-group">
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="BUS" id="mode-bus" checked>
                            <label for="mode-bus">Busz</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="TRAM" id="mode-tram" checked>
                            <label for="mode-tram">Villamos</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="SUBWAY" id="mode-subway" checked>
                            <label for="mode-subway">Metr√≥</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="RAIL" id="mode-rail" checked>
                            <label for="mode-rail">Vonat</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="SUBURBAN_RAILWAY" id="mode-hev" checked>
                            <label for="mode-hev">H√âV</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="TROLLEYBUS" id="mode-trolleybus" checked>
                            <label for="mode-trolleybus">Troli</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="COACH" id="mode-coach" checked>
                            <label for="mode-coach">T√°vols√°gi busz</label>
                        </div>
                        <div class="box-option">
                            <input type="checkbox" name="mode" value="FERRY" id="mode-ferry" checked>
                            <label for="mode-ferry">Haj√≥</label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Optimaliz√°l√°s:</label>
                    <div class="radio-group">
                        <div class="box-option">
                            <input type="radio" name="optimize" value="QUICK" id="optimize-quick" checked>
                            <label for="optimize-quick">Leggyorsabb</label>
                        </div>
                        <div class="box-option">
                            <input type="radio" name="optimize" value="WALK" id="optimize-walk">
                            <label for="optimize-walk">Legkevesebb s√©ta</label>
                        </div>
                        <div class="box-option">
                            <input type="radio" name="optimize" value="TRANSFERS" id="optimize-transfers">
                            <label for="optimize-transfers">Legkevesebb √°tsz√°ll√°s</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button type="button" id="back-btn" class="back-button">El≈ëz≈ë</button>
                <button type="button" id="next-btn" class="next-button">K√∂vetkez≈ë</button>
            </div>
            <button class="submit-button" id="submit-btn">√ötvonal tervez√©se</button>
        </form>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('route-form');
        const cards = document.querySelectorAll('.card');
        const nextBtn = document.getElementById('next-btn');
        const backBtn = document.getElementById('back-btn');
        const submitBtn = document.getElementById('submit-btn');

        let currentStep = 0;

        const originInput = document.getElementById('origin-input');
        const destinationInput = document.getElementById('destination-input');
        const dateInput = document.getElementById('date-input');
        const arrivalTimeInput = document.getElementById('arrival-time');
        const todayBtn = document.getElementById('today-btn');
        const tomorrowBtn = document.getElementById('tomorrow-btn');
        const timingNow = document.getElementById('timing-now');
        const timingArrival = document.getElementById('timing-arrival');
        const currentLocationBtn = document.getElementById('current-location-btn');

        let originVertex = '';
        let destinationVertex = '';
        let customData = null; // JSON-b≈ël bet√∂lt√∂tt extra adatok

        const stepValidators = {
            1: () => dateInput.value !== '',
            2: () => destinationVertex !== '',
            3: () => timingArrival.checked ? arrivalTimeInput.value !== '' : true,
            4: () => originVertex !== '',
            5: () => true
        };

        function showStep(step) {
            cards.forEach(card => card.classList.remove('active'));
            cards[step].classList.add('active');

            backBtn.style.display = step > 0 ? 'block' : 'none';
            nextBtn.style.display = step < cards.length - 1 ? 'block' : 'none';
            submitBtn.style.display = step === cards.length - 1 ? 'block' : 'none';

            cards.forEach((card, index) => {
                if (index < step) card.classList.add('completed');
                else card.classList.remove('completed');
            });

            // ha √©rkez√©si id≈ë v√°laszt√°s van ‚Üí friss√≠t√©s
            if (step === 3) {
                updateArrivalOptions();
            }
        }

        function setInitialState() {
            const today = new Date().toISOString().slice(0, 10);
            dateInput.value = today;
            timingNow.checked = true;
            arrivalTimeInput.disabled = true;
            showStep(currentStep);
        }

        function updateTimingNowState() {
            const today = new Date().toISOString().slice(0, 10);
            const isToday = dateInput.value === today;

            timingNow.disabled = !isToday;
            timingNow.checked = isToday;
            timingArrival.checked = !isToday;
            arrivalTimeInput.disabled = !timingArrival.checked;
        }

        timingNow.addEventListener('change', () => arrivalTimeInput.disabled = true);
        timingArrival.addEventListener('change', () => arrivalTimeInput.disabled = false);
        dateInput.addEventListener('change', updateTimingNowState);

        todayBtn.addEventListener('click', () => {
            const today = new Date();
            dateInput.value = today.toISOString().slice(0, 10);
            updateTimingNowState();
        });

        tomorrowBtn.addEventListener('click', () => {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            dateInput.value = tomorrow.toISOString().slice(0, 10);
            updateTimingNowState();
        });

        currentLocationBtn.addEventListener('click', () => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    originInput.value = 'Aktu√°lis poz√≠ci√≥';
                    originVertex = `Aktu√°lis poz√≠ci√≥::${lat},${lon}`;
                    nextBtn.click();
                }, () => alert('Nem siker√ºlt lek√©rni a poz√≠ci√≥t.'));
            } else {
                alert('A b√∂ng√©sz≈ë nem t√°mogatja a helymeghat√°roz√°st.');
            }
        });

        // --- Autocomplete eredeti API-val ---
        const setupAutocomplete = (inputElement, resultsElement, setVertexFn, type) => {
            inputElement.addEventListener('input', async (e) => {
                const query = e.target.value.trim();
                resultsElement.innerHTML = '';

                // ha van custom JSON √©s egyez≈ë hely
                if (customData && customData.places) {
                    const matches = customData.places.filter(p => p.name.toLowerCase().includes(query.toLowerCase()));
                    if (matches.length > 0) {
                        resultsElement.style.display = 'block';
                        matches.forEach(p => {
                            const resultItem = document.createElement('div');
                            resultItem.className = 'autocomplete-list-item stop';
                            resultItem.textContent = p.name;
                            resultItem.addEventListener('click', () => {
                                inputElement.value = p.name;
                                setVertexFn(`${p.name}::${p.vertex}`);
                                resultsElement.innerHTML = '';
                                resultsElement.style.display = 'none';
                                if (type === 'destination') updateArrivalOptions();
                            });
                            resultsElement.appendChild(resultItem);
                        });
                        return;
                    }
                }

                if (query.length < 2) {
                    resultsElement.style.display = 'none';
                    setVertexFn('');
                    return;
                }

                resultsElement.style.display = 'block';

                try {
                    const response = await fetch(`https://go.bkk.hu/api/geocoder/v1/geocode?q=${encodeURIComponent(query)}&types=places&types=stop-areas&version=44&appVersion=1.0&key=05f00c85-2177-4345-9103-e72960f3918d`);
                    const data = await response.json();

                    const { otp, osm } = data.data.entry.places;
                    const results = [];
                    if (otp) otp.forEach(item => results.push({ ...item, type: 'otp' }));
                    if (osm) osm.forEach(item => results.push({ ...item, type: 'osm' }));

                    if (results.length > 0) {
                        results.forEach(item => {
                            const resultItem = document.createElement('div');
                            resultItem.className = 'autocomplete-list-item';
                            if (item.type === 'otp') resultItem.classList.add('stop');
                            resultItem.textContent = item.mainTitle;
                            resultItem.addEventListener('click', () => {
                                inputElement.value = item.mainTitle;
                                let vertex = '';
                                if (item.type === 'otp') vertex = `${item.name}::${item.vertex}`;
                                else vertex = `${item.name}::${item.lat},${item.lon}`;
                                setVertexFn(vertex);
                                resultsElement.innerHTML = '';
                                resultsElement.style.display = 'none';
                                if (type === 'destination') updateArrivalOptions();
                            });
                            resultsElement.appendChild(resultItem);
                        });
                    } else {
                        resultsElement.innerHTML = '<div style="padding:10px; color:gray;">Nincs tal√°lat</div>';
                    }
                } catch {
                    resultsElement.innerHTML = '<div style="padding:10px; color:red;">Hiba a keres√©sben</div>';
                }
            });

            document.addEventListener('click', (e) => {
                if (!resultsElement.contains(e.target) && e.target !== inputElement) {
                    resultsElement.innerHTML = '';
                    resultsElement.style.display = 'none';
                }
            });
        };

        setupAutocomplete(originInput, document.getElementById('origin-results'), (v) => originVertex = v, 'origin');
        setupAutocomplete(destinationInput, document.getElementById('destination-results'), (v) => destinationVertex = v, 'destination');

        function createPlaceButtons(places, container, inputEl, setVertexFn) {
            container.innerHTML = '';
            places.forEach(p => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.textContent = p.name;
                btn.addEventListener('click', () => {
                    inputEl.value = p.name;
                    setVertexFn(`${p.name}::${p.vertex}`);
                    if (container.id === 'destination-buttons') updateArrivalOptions();
                });
                container.appendChild(btn);
            });
        }

        function createArrivalButtons(times, container, inputEl) {
            container.innerHTML = '';
            times.forEach(t => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.textContent = t.title;
                btn.addEventListener('click', () => {
                    inputEl.value = t.time;
                    timingArrival.checked = true;
                    arrivalTimeInput.disabled = false;
                });
                container.appendChild(btn);
            });
        }
        
        // --- Arrival times a JSON alapj√°n ---
        function updateArrivalOptions() {
            if (!customData || !customData.places) return;
            const dest = customData.places.find(p => `${p.name}::${p.vertex}` === destinationVertex);
            if (!dest || !dest.arriveTimes) return;

            const date = new Date(dateInput.value);
            const dayIndex = date.getDay() - 1;
            const timesForDay = dest.arriveTimes[dayIndex] || [];

            const container = document.getElementById('arrival-buttons');
            createArrivalButtons(timesForDay, container, arrivalTimeInput);
        }

        nextBtn.addEventListener('click', () => {
            if (stepValidators[currentStep + 1]()) {
                currentStep++;
                showStep(currentStep);
            } else {
                alert('T√∂ltsd ki ezt a mez≈ët!');
            }
        });

        backBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        });

        submitBtn.addEventListener('click', () => {
            const origin = originVertex;
            const destination = destinationVertex;
            if (!destination || !origin) {
                alert('Add meg a kiindul√°si √©s a c√©l√°llom√°st is!');
                return;
            }

            const baseUrl = `./terv/`;
            const date = dateInput.value;
            const time = arrivalTimeInput.value;
            const today = new Date().toISOString().slice(0, 10);

            let planUrl = `${baseUrl}?fromPlace=${origin}&toPlace=${destination}`;

            if (timingArrival.checked) {
                planUrl += `&arriveBy=true`;
                if (date && date !== today) planUrl += `&date=${date}`;
                if (time) planUrl += `&time=${time}`;
            } else {
                planUrl += `&arriveBy=false`;
                if (date && date !== today) planUrl += `&date=${date}`;
            }

            const walkSpeed = document.getElementById('walk-speed').value;
            planUrl += `&walkProfile=${walkSpeed}`;

            const optimize = document.querySelector('input[name="optimize"]:checked').value;
            planUrl += `&optimize=${optimize}`;

            const modes = ['WALK'];
            document.querySelectorAll('input[name="mode"]').forEach(c => {
                if (c.checked) modes.push(c.value);
            });
            planUrl += `&mode=${modes.join(',')}`;
            planUrl += `&showIntermediateStops=true`;

            window.open(planUrl, '_blank');
        });

        // --- JSON param√©ter feldolgoz√°s ---
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('json')) {
            try {
                customData = JSON.parse(urlParams.get('json'));

                // Be√°ll√≠t√°sok el≈ët√∂lt√©se
                if (customData.settings) {
                    if (customData.settings.walkProfile) {
                        document.getElementById('walk-speed').value = customData.settings.walkProfile;
                    }
                    if (customData.settings.optimize) {
                        const radio = document.querySelector(`input[name="optimize"][value="${customData.settings.optimize}"]`);
                        if (radio) radio.checked = true;
                    }
                    if (Array.isArray(customData.settings.mode)) {
                        document.querySelectorAll('input[name="mode"]').forEach(cb => {
                            cb.checked = customData.settings.mode.includes(cb.value);
                        });
                    }
                }

                // Helyv√°laszt√≥ gombok
                if (customData.places) {
                    createPlaceButtons(customData.places, document.getElementById('origin-buttons'), originInput, (v) => originVertex = v);
                    createPlaceButtons(customData.places, document.getElementById('destination-buttons'), destinationInput, (v) => destinationVertex = v);
                }
            } catch (e) {
                console.error('Hib√°s JSON param√©ter');
            }
        }

        setInitialState();
        updateTimingNowState();
    });
</script>

</body>
</html>